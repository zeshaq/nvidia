export NGC_API_KEY="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"

helm fetch https://helm.ngc.nvidia.com/nim/nvidia/charts/nvidia-nim-llama-32-nv-embedqa-1b-v2-1.9.0.tgz --username='$oauthtoken' --password=$NGC_API_KEY

kubectl create namespace embedding-nim

kubectl create secret -n embedding-nim docker-registry ngc-secret \
 --docker-server=nvcr.io \
 --docker-username='$oauthtoken' \
 --docker-password="${NGC_API_KEY}"


helm fetch https://helm.ngc.nvidia.com/nim/nvidia/charts/text-embedding-nim-1.2.0.tgz --username='$oauthtoken' --password="${NGC_API_KEY}"

helm upgrade --install \
  --namespace embedding-nim \
  -f values-mistral.yaml \
  --set image.repository=nvcr.io/nim/nvidia/nv-embedqa-mistral-7b-v2 \
  --set image.tag=1.0.1 \
  --set persistence.class="local-nfs" \
  nemo-embedder \
  text-embedding-nim-1.2.0.tgz
